"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[402],{2195:function(a,b,c){c.d(b,{Z:function(){return i}});var d=c(5893),e=c(7294),f=c(3587),g=c(3629),h=c(3664);function i(a){var b=a.isOpen,c=a.onClose,i=a.message,j=a.title,k=a.hideSecondaryBtn,l=a.primaryBtnLabel;return(0,d.jsx)(f.u,{appear:!0,show:b,as:e.Fragment,children:(0,d.jsxs)(g.V,{as:"div",className:"relative z-10",onClose:c,children:[(0,d.jsx)(f.u.Child,{as:e.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,d.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,d.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,d.jsx)(f.u.Child,{as:e.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,d.jsxs)(g.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,d.jsx)(g.V.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:j}),(0,d.jsx)("div",{className:"mt-2",children:(0,d.jsx)("p",{className:"text-sm text-gray-500",children:i})}),(0,d.jsxs)("div",{className:"mt-4 flex justify-start",children:[(0,d.jsx)(h.Z,{secondary:!0,className:"mr-10",onClick:function(){return c(!0)},children:(void 0===l?"":l)||"Yes"}),!k&&(0,d.jsx)(h.Z,{primary:!0,onClick:function(){return c(!1)},children:"No"})]})]})})})})]})})}},2605:function(a,b,c){c.d(b,{Z:function(){return x}});var d=c(5893),e=c(7294),f=c(2351),g=c(9946),h=c(1363),i=c(4103),j=c(6723),k=c(3784),l=c(3781);let m=(0,e.createContext)(null);function n(){let a=(0,e.useContext)(m);if(null===a){let b=Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(b,n),b}return a}let o=(0,f.yV)(function(a,b){let{passive:c=!1,...d}=a,e=n(),h=`headlessui-label-${(0,g.M)()}`,i=(0,k.T)(b);(0,j.e)(()=>e.register(h),[h,e.register]);let l={ref:i,...e.props,id:h};return c&&("onClick"in l&&delete l.onClick,"onClick"in d&&delete d.onClick),(0,f.sY)({ourProps:l,theirProps:d,slot:e.slot||{},defaultTag:"label",name:e.name||"Label"})});var p=c(9516);function q(a){var b;if(a.type)return a.type;let c=null!=(b=a.as)?b:"button";if("string"==typeof c&&"button"===c.toLowerCase())return"button"}var r=c(6045);function s(a,b){return a?a+"["+b+"]":b}function t(a,b,c){if(Array.isArray(c))for(let[d,e]of c.entries())t(a,s(b,d.toString()),e);else c instanceof Date?a.push([b,c.toISOString()]):"boolean"==typeof c?a.push([b,c?"1":"0"]):"string"==typeof c?a.push([b,c]):"number"==typeof c?a.push([b,`${c}`]):null==c?a.push([b,""]):function(a={},b=null,c=[]){for(let[d,e]of Object.entries(a))t(c,s(b,d),e);return c}(c,b,a)}let u=(0,e.createContext)(null);u.displayName="GroupContext";let v=e.Fragment,w=Object.assign((0,f.yV)(function(a,b){let{checked:c,onChange:d,name:m,value:n,...o}=a,p=`headlessui-switch-${(0,g.M)()}`,s=(0,e.useContext)(u),t=(0,e.useRef)(null),v=(0,k.T)(t,b,null===s?null:s.setSwitch),w=(0,l.z)(()=>d(!c)),x=(0,l.z)(a=>{if((0,i.P)(a.currentTarget))return a.preventDefault();a.preventDefault(),w()}),y=(0,l.z)(a=>{a.key===h.R.Space?(a.preventDefault(),w()):a.key===h.R.Enter&&function(a){var b;let c=null!=(b=null==a?void 0:a.form)?b:a.closest("form");if(c){for(let d of c.elements)if("INPUT"===d.tagName&&"submit"===d.type||"BUTTON"===d.tagName&&"submit"===d.type||"INPUT"===d.nodeName&&"image"===d.type){d.click();return}}}(a.currentTarget)}),z=(0,l.z)(a=>a.preventDefault()),A=(0,e.useMemo)(()=>({checked:c}),[c]),B={id:p,ref:v,role:"switch",type:function(a,b){let[c,d]=(0,e.useState)(()=>q(a));return(0,j.e)(()=>{d(q(a))},[a.type,a.as]),(0,j.e)(()=>{c||!b.current||b.current instanceof HTMLButtonElement&&!b.current.hasAttribute("type")&&d("button")},[c,b]),c}(a,t),tabIndex:0,"aria-checked":c,"aria-labelledby":null==s?void 0:s.labelledby,"aria-describedby":null==s?void 0:s.describedby,onClick:x,onKeyUp:y,onKeyPress:z};return e.createElement(e.Fragment,null,null!=m&&c&&e.createElement(r._,{features:r.A.Hidden,...(0,f.oA)({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:c,name:m,value:n})}),(0,f.sY)({ourProps:B,theirProps:o,slot:A,defaultTag:"button",name:"Switch"}))}),{Group:function(a){let[b,c]=(0,e.useState)(null),[d,g]=function(){let[a,b]=(0,e.useState)([]);return[a.length>0?a.join(" "):void 0,(0,e.useMemo)(()=>function(a){let c=(0,l.z)(a=>(b(b=>[...b,a]),()=>b(b=>{let c=b.slice(),d=c.indexOf(a);return -1!==d&&c.splice(d,1),c}))),d=(0,e.useMemo)(()=>({register:c,slot:a.slot,name:a.name,props:a.props}),[c,a.slot,a.name,a.props]);return e.createElement(m.Provider,{value:d},a.children)},[b])]}(),[h,i]=(0,p.f)(),j=(0,e.useMemo)(()=>({switch:b,setSwitch:c,labelledby:d,describedby:h}),[b,c,d,h]);return e.createElement(i,{name:"Switch.Description"},e.createElement(g,{name:"Switch.Label",props:{onClick(){b&&(b.click(),b.focus({preventScroll:!0}))}}},e.createElement(u.Provider,{value:j},(0,f.sY)({ourProps:{},theirProps:a,defaultTag:v,name:"Switch.Group"}))))},Label:o,Description:p.d});function x(a){var b=a.isEnabled,c=a.onChange,e=a.className;return(0,d.jsx)("div",{className:void 0===e?"":e,children:(0,d.jsxs)(w,{checked:b,onChange:c,className:"".concat(b?"bg-blue-500":"bg-black","\n          relative inline-flex h-[28px] w-[64px] shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus-visible:ring-2  focus-visible:ring-white focus-visible:ring-opacity-75"),children:[(0,d.jsx)("span",{className:"sr-only",children:"Use setting"}),(0,d.jsx)("span",{"aria-hidden":"true",className:"".concat(b?"translate-x-9":"translate-x-0","\n            pointer-events-none inline-block h-[24px] w-[24px] transform rounded-full bg-white shadow-lg ring-0 transition duration-200 ease-in-out")})]})})}},9402:function(a,b,c){c.d(b,{Z:function(){return F}});var d=c(4924),e=c(6042),f=c(9396),g=c(5893),h=c(7294),i=c(2664),j=c(7462),k=c(5037),l=c(4766),m=c(7400),n=c(1451),o=c(5987),p=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],q=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:"",b=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,d=String(a).toLowerCase(),e=String(c.getOptionValue(b)).toLowerCase(),f=String(c.getOptionLabel(b)).toLowerCase();return e===d||f===d},r={formatCreateLabel:function(a){return'Create "'.concat(a,'"')},isValidNewOption:function(a,b,c,d){return!(!a||b.some(function(b){return q(a,b,d)})||c.some(function(b){return q(a,b,d)}))},getNewOptionData:function(a,b){return{label:b,value:a,__isNew__:!0}}};c(3935);var s=(0,h.forwardRef)(function(a,b){var c,d,e,f,g,i,q,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N=(e=void 0!==(d=(c=(0,l.u)(a)).allowCreateWhileLoading)&&d,f=c.createOptionPosition,g=void 0===f?"last":f,i=c.formatCreateLabel,q=void 0===i?r.formatCreateLabel:i,s=c.isValidNewOption,t=void 0===s?r.isValidNewOption:s,u=c.getNewOptionData,v=void 0===u?r.getNewOptionData:u,w=c.onCreateOption,x=c.options,y=void 0===x?[]:x,z=c.onChange,A=(0,o.Z)(c,p),B=A.getOptionValue,C=void 0===B?k.g:B,D=A.getOptionLabel,E=void 0===D?k.a:D,F=A.inputValue,G=A.isLoading,H=A.isMulti,I=A.value,J=A.name,K=(0,h.useMemo)(function(){return t(F,(0,m.J)(I),y,{getOptionValue:C,getOptionLabel:E})?v(F,q(F)):void 0},[q,v,E,C,F,t,y,I]),L=(0,h.useMemo)(function(){return(e||!G)&&K?"first"===g?[K].concat((0,n.Z)(y)):[].concat((0,n.Z)(y),[K]):y},[e,g,G,K,y]),M=(0,h.useCallback)(function(a,b){if("select-option"!==b.action)return z(a,b);var c=Array.isArray(a)?a:[a];if(c[c.length-1]===K){if(w)w(F);else{var d=v(F,F),e={action:"create-option",name:J,option:d};z((0,m.E)(H,[].concat((0,n.Z)((0,m.J)(I)),[d]),d),e)}return}z(a,b)},[v,F,H,J,K,w,z,I]),(0,m.a)((0,m.a)({},A),{},{options:L,onChange:M}));return h.createElement(k.S,(0,j.Z)({ref:b},N))}),t=c(1163),u=c(2920),v=c(2814),w=c(1436),x=c(9819),y=c(3664),z=c(2605),A=c(2195),B=c(3096),C=c(1833),D=c(7701);function E(a){var b=a.productCategoriesList,c=a.addProduct,i=a.getProduct,j=a.updateProduct,k=a.deleteProduct,l=(0,t.useRouter)(),m=l.query.id,n=(0,h.useRef)(),o=!!m,p=(0,h.useState)({}),q=p[0],r=p[1],B=(0,h.useState)(""),E=B[0],F=B[1],G=(0,h.useState)(""),H=G[0],I=G[1],J=(0,h.useState)(""),K=J[0],L=J[1],M=(0,h.useState)(""),N=M[0],O=M[1],P=(0,h.useState)(""),Q=P[0],R=P[1],S=(0,h.useState)(""),T=S[0],U=S[1],V=(0,h.useState)(""),W=V[0],X=V[1],Y=(0,h.useState)(""),Z=Y[0],$=Y[1],_=(0,h.useState)(!0),aa=_[0],ab=_[1],ac=(0,h.useState)(!1),ad=ac[0],ae=ac[1],af=(0,h.useState)(!1),ag=af[0],ah=af[1],ai=(0,h.useState)(""),aj=ai[0],ak=ai[1],al=(0,h.useState)(""),am=al[0],an=al[1],ao=(0,h.useMemo)(function(){return!!am&&am.name},[am]);(0,h.useEffect)(function(){m&&b.length>0&&i({id:m,callback:function(a){var c=a,d=b.find(function(a){return a.id===c.category_id});F(a.name),d&&I(d),L(a.unit),O(a.rate_per),R(a.rate),U(a.case_content),X(a.discount),ab(a.is_available),ak(a.image_url)}})},[m,b]);var ap=function(a){var b=a.target,c=b.value,g=b.name;switch(g){case"name":F(c);break;case"unit":L(c);break;case"ratePer":O(c);break;case"rate":R(c);break;case"caseContent":U(c);break;case"discount":X(c);break;case"stock":$(c)}r(function(a){return(0,f.Z)((0,e.Z)({},a),(0,d.Z)({},g,!c))})},aq=function(a){I(a)},ar=function(){if(!E){r(function(a){return(0,f.Z)((0,e.Z)({},a),{name:!0})});return}if(!N){r(function(a){return(0,f.Z)((0,e.Z)({},a),{ratePer:!0})});return}if(!K){r(function(a){return(0,f.Z)((0,e.Z)({},a),{unit:!0})});return}if(!Q){r(function(a){return(0,f.Z)((0,e.Z)({},a),{rate:!0})});return}if(!H){r(function(a){return(0,f.Z)((0,e.Z)({},a),{category:!0})});return}if(o){var a=new FormData;a.append("id",m),a.append("name",E),a.append("isAvailable",aa),a.append("ratePer",N),a.append("unit",K),a.append("rate",Q),a.append("discount",W),a.append("isNewCategory",!!H.__isNew__),a.append("categoryId",H.value),a.append("categoryName",H.__isNew__?H.label:void 0),a.append("caseContent",T||""),am&&(a.append("isUploadFile",!0),a.append("file",am)),j({payload:a,isRefetchCategories:!!H.__isNew__,callback:function(a){a&&a.success?(u.Am.success("Product updated successfully"),l.push(C.adminProductList)):u.Am.error(a?a.message:"Could not update product")}})}else{var b=new FormData;b.append("id",m),b.append("name",E),b.append("isAvailable",aa),b.append("ratePer",N),b.append("unit",K),b.append("rate",Q),b.append("discount",W&&W>0?W:0),b.append("isNewCategory",!!H.__isNew__),b.append("categoryId",H.value),b.append("categoryName",H.__isNew__?H.label:void 0),b.append("caseContent",T||""),am&&(b.append("isUploadFile",!0),b.append("file",am)),c({payload:b,isRefetchCategories:!!H.__isNew__,callback:function(a){a&&a.success?(u.Am.success("Product added"),l.push(C.adminProductList)):u.Am.error("Failed to add product")}})}},as=function(){ab(function(a){return!a})},at=function(){ae(!0)},au=function(a){ae(!1),a&&k({id:m,callback:function(a){a.success?(u.Am.success("Successfully deleted product"),l.push(C.adminProductList)):u.Am.error(a.message)}})},av=function(){n.current.click()},aw=function(a){var b=a.target.files;b[0].size>D.fileSizeLimit?ah(!0):an(b[0])};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(A.Z,{isOpen:ad,onClose:function(a){return au(a)},title:"Are you sure",message:"Are you sure you want to delete the product?"}),(0,g.jsx)(A.Z,{isOpen:ag,onClose:function(){return ah(!1)},title:"Image too large",message:"Image size should be less than or equalt to 350 kb",hideSecondaryBtn:!0,primaryBtnLabel:"Okay"}),(0,g.jsxs)("div",{className:"p-6 h-full add-edit-product",children:[(0,g.jsxs)("div",{className:"text-lg font-bold mb-3",children:[o?"Edit":"Add"," Product"]}),(0,g.jsxs)("div",{className:"rounded-md p-5 shadow-xl md:w-2/3 md:ml-auto ml-0 w-full",children:[(0,g.jsxs)("div",{className:"flex flex-wrap",children:[(0,g.jsxs)("div",{className:"mb-2 form-ctrl mr-2",children:[(0,g.jsx)("label",{htmlFor:"name",className:"font-medium mb-3 text-gray-600",children:"Name *"}),(0,g.jsx)(x.Z,{type:"text",name:"name",id:"name",className:"w-full",onChange:ap,value:E,placeholder:"Name"}),q.name&&(0,g.jsx)("p",{className:"text-red-600 mt-3",children:"Name is required"})]}),(0,g.jsxs)("div",{className:"mb-2 form-ctrl",children:[(0,g.jsx)("label",{className:"font-medium mb-3 text-gray-600",children:"Category *"}),(0,g.jsx)(s,{isClearable:!0,onChange:aq,options:b,value:H}),q.category&&(0,g.jsx)("p",{className:"text-red-600 mt-3",children:"Please select a category"})]})]}),(0,g.jsxs)("div",{className:"flex flex-wrap",children:[(0,g.jsxs)("div",{className:"mb-2 form-ctrl mr-2",children:[(0,g.jsx)("label",{htmlFor:"ratePer",className:"font-medium mb-3 text-gray-600",children:"Rate per *"}),(0,g.jsx)(x.Z,{type:"number",name:"ratePer",id:"ratePer",className:"w-full",onChange:ap,value:N,placeholder:"Rate per"}),q.ratePer&&(0,g.jsx)("p",{className:"text-red-600 mt-3",children:"Rate per is required"})]}),(0,g.jsxs)("div",{className:"mb-2 form-ctrl",children:[(0,g.jsx)("label",{htmlFor:"unit",className:"font-medium mb-3 text-gray-600",children:"Unit *"}),(0,g.jsx)(x.Z,{type:"number",name:"unit",id:"unit",className:"w-full",onChange:ap,value:K,placeholder:"Unit"}),q.unit&&(0,g.jsx)("p",{className:"text-red-600 mt-3",children:"Unit is required"})]})]}),(0,g.jsxs)("div",{className:"flex flex-wrap",children:[(0,g.jsxs)("div",{className:"mb-2 form-ctrl mr-2",children:[(0,g.jsx)("label",{htmlFor:"rate",className:"font-medium mb-3 text-gray-600",children:"Rate *"}),(0,g.jsx)(x.Z,{type:"number",name:"rate",id:"rate",className:"w-full",onChange:ap,value:Q,placeholder:"Rate"}),q.rate&&(0,g.jsx)("p",{className:"text-red-600 mt-3",children:"Rate is required"})]}),(0,g.jsxs)("div",{className:"mb-2 form-ctrl",children:[(0,g.jsx)("label",{htmlFor:"caseContent",className:"font-medium mb-3 text-gray-600",children:"Case content"}),(0,g.jsx)(x.Z,{type:"number",name:"caseContent",id:"caseContent",className:"w-full",onChange:ap,value:T,placeholder:"Case Content"})]})]}),(0,g.jsxs)("div",{className:"flex flex-wrap",children:[(0,g.jsxs)("div",{className:"mb-2 form-ctrl mr-2",children:[(0,g.jsx)("label",{htmlFor:"discount",className:"font-medium mb-3 text-gray-600",children:"Discount"}),(0,g.jsx)(x.Z,{type:"number",name:"discount",id:"discount",className:"w-full",onChange:ap,value:W,placeholder:"Discount"})]}),(0,g.jsxs)("div",{className:"mb-2 form-ctrl ml-2",children:[(0,g.jsx)("label",{htmlFor:"discount",className:"font-medium mb-3 text-gray-600",children:"Available"}),(0,g.jsx)(z.Z,{isEnabled:aa,onChange:as,className:"mt-2"})]})]}),(0,g.jsx)("div",{className:"flex flex-wrap",children:!o&&(0,g.jsxs)("div",{className:"mb-2 form-ctrl mr-2",children:[(0,g.jsx)("label",{htmlFor:"stock",className:"font-medium mb-3 text-gray-600",children:"Initial stock"}),(0,g.jsx)(x.Z,{type:"number",name:"stock",id:"stock",className:"w-full",onChange:ap,value:Z,placeholder:"Stock"})]})}),(0,g.jsxs)("div",{className:"flex flex-wrap items-center",children:[(0,g.jsxs)("div",{className:"mb-2 mr-2",children:[(0,g.jsx)("input",{accept:"image/png, image/gif, image/jpeg",onChange:aw,type:"file",className:"opacity-0 absolute top-0 left-0",ref:n}),(0,g.jsxs)(y.Z,{className:"flex items-center whitespace-nowrap w-fit mt-2",onClick:av,children:[(0,g.jsx)(v.G,{icon:w.wEO,className:"mr-2"}),(0,g.jsx)("span",{children:"Upload image"})]})]}),ao&&(0,g.jsx)("div",{className:"whitespace-nowrap w-96 overflow-hidden text-ellipsis",children:ao})]}),aj&&(0,g.jsx)("img",{src:aj,className:"preview-image"}),(0,g.jsxs)("div",{className:"flex justify-between mt-4 items-center",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)(y.Z,{onClick:ar,className:"mr-3",children:"save"}),(0,g.jsx)(y.Z,{secondary:!0,onClick:function(){return l.push(C.adminProductList)},className:"w-24",children:"cancel"})]}),o&&(0,g.jsx)(v.G,{icon:w.$aW,className:"text-2xl cursor-pointer",onClick:at})]})]})]})]})}var F=function(){var a=(0,i.I0)(),b=(0,i.v9)(function(a){return a.product.productCategoriesList});return(0,g.jsx)(E,{productCategoriesList:b,addProduct:function(b){return a((0,B.ry)(b))},getProduct:function(b){return a((0,B._0)(b))},updateProduct:function(b){return a((0,B.zG)(b))},deleteProduct:function(b){return a((0,B.u0)(b))}})}}}])